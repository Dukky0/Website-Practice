<!DOCTYPE html>
<html>
    <head>
        <link href="http://localhost:53134/assets/main" rel="stylesheet">
        <!-- <script src="http://localhost:53134/assets/main_script" defer></script> -->
        <script>
            window.onload = () => {
                const fragment = new URLSearchParams(window.location.hash.slice(1));
                const [accessToken, tokenType] = [fragment.get('access_token'), fragment.get('token_type')];
        
                if (!accessToken) {
                    return (document.getElementById('login').style.display = 'block');
                }
        
                fetch('https://discord.com/api/users/@me', {
                    headers: {
                        authorization: `${tokenType} ${accessToken}`,
                    },
                })
                    .then(result => result.json())
                    .then(response => {
                        const { username, discriminator } = response;
                        document.getElementById('info').innerText += ` ${username}#${discriminator}`;
                    })
                    .catch(console.error);
            };
        </script>
    </head>
    <body>
        <div id="page-content">
            <div id="content-wrap">
                <header class="sticky">
                    <nav id="nav-left">
                        <ul>
                            <li class="btn-padding"><a id="home-btn" class="nav-btn btn-content nav-left" href="http://localhost:53134/">Home</a></li>
                            <li class="btn-padding"><a id="reminders-btn" class="nav-btn btn-content nav-left" href="http://localhost:53134/reminders">Reminders</a></li>
                            <li class="btn-padding"><a id="calendar-btn" class="nav-btn btn-content nav-left" href="http://localhost:53134/calendar">Calendar</a></li>
                            <li class="btn-padding"><a id="setup-btn" class="nav-btn rnd-btn-style nav-left" href="http://localhost:53134/donate" target="_blank">Get Started</a></li>
                            <!-- TODO: Setup Button Animations -->
                        </ul>
                    </nav>
                    <nav id="nav-right">
                        <ul>
                            <li class="btn-padding"><a id="donate-btn" class="nav-btn rnd-btn-style nav-right" href="http://localhost:53134/donate" target="_blank">Upgrade To Premium</a></li>
                            <li class="btn-padding"><a id="login-btn" class="nav-btn btn-content btn-padding nav-right" href="http://localhost:53134/login"><u>Login</u></a></li>
                        </ul>
                    </nav>
                </header>
                <main>
                    <p id="info" style="color:blanchedalmond; padding-top: 5em;"></p>
                    <a id="login" style="display: none; padding-top: 5em;" href="https://discord.com/api/oauth2/authorize?client_id=1090470700705398937&redirect_uri=http%3A%2F%2Flocalhost%3A53134%2Flogin&response_type=code&scope=identify">Identify Yourself</a>
                </main>
            </div>
            <footer>
                <div>
                    <p class="center-txt">footer content</p>
                </div>
            </footer>
        </div>
    </body>
</html>